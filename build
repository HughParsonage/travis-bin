#!/bin/sh

for i in $TARGET;
do
case $i in
  pandoc)
    cabal install --flags="embed_data_files" pandoc pandoc-citeproc
    cp ~/.cabal/bin/pandoc* ./
    tar zcf pandoc.tar.gz pandoc pandoc-citeproc
    rm pandoc pandoc-citeproc
    ;;
  texlive)
    tar zxf install-tl*
    ./install-tl*/install-tl -profile TexLive.profile
    sudo ~/texlive/bin/x86_64-linux/tlmgr path add
    tlmgr install $(cat TeXLive.pkgs | tr '\n' ' ')
    # `tlmgr install bibtex` does not install apalike.sty, hence the hack
    wget http://www.tex.ac.uk/ctan/biblio/bibtex/base/apalike.sty
    mv apalike.sty ~/texlive/texmf-dist/tex/latex/
    mktexlsr
    equivs-build debian-*
    mv texlive-local*.deb texlive-local.deb
    tar zcf texlive.tar.gz -C ~ texlive
    ;;
  *)
    echo "nothing to build"
    ;;
esac
done
